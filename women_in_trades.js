const pages = [
    {
        "name": "Automotive Service Worker - Meet Nicole Humphrey",
        "job-title": "Automotive Service Worker",
        "person-name": "Nicole Humphrey",
        "type": "page",
        "url": "https://www.sfmta.com/sfmta-career-center/women-in-the-trades-sfmta/automotive-service-worker",
        "img": "https://www.sfmta.com/sites/default/files/teaser-images/2024/03/automotive_service_worker_nicolehumphrey_headerimage.jpg",
        "section-name": "Women in the Trades at Muni",
        "section-url": "https://www.sfmta.com/blog/celebrate-women-trades-muni-and-learn-how-work-their-fields"
    },
    {
        "name": "Contract Manager - Meet Katherine Kwok",
        "job-title": "Contract Manager",
        "person-name": "Katherine Kwok",
        "type": "page",
        "url": "https://www.sfmta.com/sfmta-career-center/women-in-the-trades-sfmta/contract-manager",
        "img": "https://www.sfmta.com/sites/default/files/teaser-images/2024/03/analyst_kat_kwok_header_image.jpg",
        "section-name": "Women in the Trades at Muni",
        "section-url": "https://www.sfmta.com/blog/celebrate-women-trades-muni-and-learn-how-work-their-fields"
    },
    {
        "name": "Engineer / Project Manager - Meet Becky Chen",
        "job-title": "Engineer / Project Manager",
        "person-name": "Becky Chen",
        "type": "page",
        "url": "https://www.sfmta.com/sfmta-career-center/women-in-the-trades-sfmta/engineer-project-manager",
        "img": "https://www.sfmta.com/sites/default/files/teaser-images/2024/03/engineer-project-manager-becky-chen-header.jpg",
        "section-name": "Women in the Trades at Muni",
        "section-url": "https://www.sfmta.com/blog/celebrate-women-trades-muni-and-learn-how-work-their-fields"
    },
    {
        "name": "Machinist Apprentice - Meet Brittany McMartin",
        "job-title": "Machinist Apprentice",
        "person-name": "Brittany McMartin",
        "type": "page",
        "url": "https://www.sfmta.com/sfmta-career-center/women-in-the-trades-sfmta/maintenance-machinist-apprentice",
        "img": "https://www.sfmta.com/sites/default/files/teaser-images/2024/03/apprenticemachinist_brittanymcmartin_headerimage.jpg",
        "section-name": "Women in the Trades at Muni",
        "section-url": "https://www.sfmta.com/blog/celebrate-women-trades-muni-and-learn-how-work-their-fields"
    },
    {
        "name": "Mechanic - Meet Jeena Villamor",
        "job-title": "Mechanic",
        "person-name": "Jeena Villamor",
        "type": "page",
        "url": "https://www.sfmta.com/sfmta-career-center/women-in-the-trades-sfmta/mechanic-buses",
        "img": "https://www.sfmta.com/sites/default/files/teaser-images/2024/03/mechanic_jeena_villamor_header_image_0.jpg",
        "section-name": "Women in the Trades at Muni",
        "section-url": "https://www.sfmta.com/blog/celebrate-women-trades-muni-and-learn-how-work-their-fields"
    },
    {
        "name": "Mechanic - Jenny Keosaat",
        "job-title": "Mechanic",
        "person-name": "Jenny Keosaat",
        "type": "page",
        "url": "https://www.sfmta.com/sfmta-career-center/women-in-the-trades-sfmta/mechanic-historic-streetcars",
        "img": "https://www.sfmta.com/sites/default/files/teaser-images/2024/03/mechanic_jenny_keosaat_header_image.jpg",
        "section-name": "Women in the Trades at Muni",
        "section-url": "https://www.sfmta.com/blog/celebrate-women-trades-muni-and-learn-how-work-their-fields"
    },
    {
        "name": "Parts Storekeeper - Meet Evelyn Cotton",
        "job-title": "Parts Storekeeper",
        "person-name": "Evelyn Cotton",
        "type": "page",
        "url": "https://www.sfmta.com/sfmta-career-center/women-in-the-trades-sfmta/parts-storekeeper",
        "img": "https://www.sfmta.com/sites/default/files/teaser-images/2024/03/partsstorekeeper_evelyn_cotton_header_image.jpg",
        "section-name": "Women in the Trades at Muni",
        "section-url": "https://www.sfmta.com/blog/celebrate-women-trades-muni-and-learn-how-work-their-fields"
    },
    {
        "name": "Parts Storekeeper Supervisor - Meet Deneitra Henry",
        "job-title": "Parts Storekeeper Supervisor",
        "person-name": "Deneitra Henry",
        "type": "page",
        "url": "https://www.sfmta.com/sfmta-career-center/women-in-the-trades-sfmta/parts-storekeeper-supervisor",
        "img": "https://www.sfmta.com/sites/default/files/teaser-images/2024/03/partsstorekeepersupervisor_deneitrahenry_headerimage.jpg",
        "section-name": "Women in the Trades at Muni",
        "section-url": "https://www.sfmta.com/blog/celebrate-women-trades-muni-and-learn-how-work-their-fields"
    },
    {
        "name": "Power System Operator - Meet ess Goldsworthy",
        "job-title": "Power System Operator",
        "person-name": "ess Goldsworthy",
        "type": "page",
        "url": "https://www.sfmta.com/sfmta-career-center/women-in-the-trades-sfmta/power-system-operator",
        "img": "https://www.sfmta.com/sites/default/files/teaser-images/2024/03/powersystemoperator_essgoldworthy_headerimage.jpg",
        "section-name": "Women in the Trades at Muni",
        "section-url": "https://www.sfmta.com/blog/celebrate-women-trades-muni-and-learn-how-work-their-fields"
    },
    {
        "name": "Transit Car Cleaner - Meet Trina Dixon",
        "job-title": "Transit Car Cleaner",
        "person-name": "Trina Dixon",
        "type": "page",
        "url": "https://www.sfmta.com/sfmta-career-center/women-in-the-trades-sfmta/transit-car-cleaner",
        "img": "https://www.sfmta.com/sites/default/files/teaser-images/2024/03/transitcarcleaner_trina_dixon_-_header_image.jpg",
        "section-name": "Women in the Trades at Muni",
        "section-url": "https://www.sfmta.com/blog/celebrate-women-trades-muni-and-learn-how-work-their-fields"
    }
]

function main() {
    const currentPage = pages.find(page => page.url === window.location.href);
    const currentPageIndex = pages.findIndex(page => page.url === window.location.href);

    // Breadcrumb functionality
    const breadcrumbOrderedList = document.querySelector('.breadcrumb');

    if (currentPage.type === 'page') {
        const newBreadcrumbItem = document.createElement('li');
        const newHomeItem = document.createElement('li');
        newBreadcrumbItem.innerHTML = `<a href="${currentPage['section-url']}">${currentPage['section-name']}</a>`;
        newHomeItem.innerHTML = `<a href="https://www.sfmta.com/sfmta-career-center">SFMTA Career Center</a>`;
        breadcrumbOrderedList.insertBefore(newBreadcrumbItem, breadcrumbOrderedList.childNodes[1]);
        breadcrumbOrderedList.insertBefore(newHomeItem, breadcrumbOrderedList.childNodes[1]);
    }

    if (currentPage.type === 'page') {
        sidebar(currentPageIndex);
    }
}

function sidebar(currentPageIndex) {
    const asideElement = document.querySelector('aside');
    if (asideElement) {
        const regionSidebarSecond = asideElement.querySelector('.region-sidebar-second');
        if (regionSidebarSecond) {
            asideElement.removeChild(regionSidebarSecond);
        }
    }
    let htmlString = '';

    pages.forEach((page, index) => {
        // Check if the current page matches the page in the iteration
        const isCurrentPage = window.location.href.includes(page.url);

        htmlString += `
    <li style="margin-top: 0.75rem; margin-bottom: 0.75rem;">
        <a href="${page.url}" class="teaser-link" ${isCurrentPage ? 'style="text-decoration: underline;"' : ''}>
            <span class="image-span">
                <img class="thumbnail img-responsive" src="${page.img}" style="width: 72px!important; height: 72px!important; object-fit: cover;" alt="${page['job-title']}: ${page['person-name']}">
            </span>
            <span class="teaser">
                <span class="title-span" style="display: block;">${page['job-title']}</span>
                <span class="text-span" style="display: block;">Meet ${page['person-name']}</span>
            </span>
        </a>
    </li>`;
    });

    if (asideElement) {
        const newSection = document.createElement('section');
        newSection.innerHTML = `
    <h2 class="block-title">
        <a id="heading-id-12iuiu42" style="color:white;" href="/blog/celebrate-women-trades-muni-and-learn-how-work-their-fields">Women in the Trades at Muni</a>
    </h2>
    <div class="view-content">
        <ul style="list-style: none; padding-left:2rem;">
            ${htmlString}
        </ul>
    </div>
`;
        asideElement.appendChild(newSection);
    }
}





main();